!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("dragula")):"function"==typeof define&&define.amd?define(["dragula"],e):e((n||self).dragula)}(this,function(n){function e(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var a=e(n);function t(n){setTimeout(function(){var e="[data-reorder]",t=n.find(e).addBack(e);console.log("enabling sort on array of "+t.length),t.each(function(n,e){var t=$(e);a.default([e],{moves:function(n,e,a){return $(n).find(".reorder-handle").length?!!$(a).closest(".reorder-handle").length:!$(a).closest(".undraggable").length&&$(a).closest("[data-reorder]")[0]==e},accepts:function(n,e,a,t){return!$(t).hasClass("undraggable")||!$(t).prev().hasClass("undraggable")}}).on("drop",function(n){!function(n){var e=n.find("> *").map(function(n,e){return parseInt($(e).attr("data-id"))}).toArray();$.post(n.attr("data-reorder"),{ids_in_order:e},function(){n.closest(".opened-modally").length&&refreshModalBase()})}(t)}).on("over",function(n,e){$(document.activeElement).blur()})})},500)}function o(n){var e=n.find("[data-reassignment-parent]").map(function(n,e){return parseInt($(e).attr("data-id"))}).toArray(),a={};$.each(e,function(e,t){a[t]=n.find("[data-reassignment-parent]").filter("[data-id='"+t+"']").find("[data-reassignable]").map(function(n,e){return parseInt($(e).attr("data-id"))}).toArray()}),$.post(n.attr("data-reassign"),{assignments_by_id:a,dispatched_at:(new Date).getTime()})}function r(n){setTimeout(function(){var e="[data-reassign]",t=n.find(e).addBack(e);t.each(function(n,e){console.log("游꼴 Reassignable 游눫 Found the following container:"),console.log(e);var r=$(e);a.default(r.find("[data-reassignment-parent]").toArray(),{moves:function(n,e,a){return!($(a).hasClass("undraggable")||$(a).closest(".undraggable").length>0||!$(a).closest("[data-reassignable]").length)},accepts:function(n,e,a,t){return!$(t).hasClass("undraggable")||!$(t).prev().hasClass("undraggable")}}).on("drag",function(n){t.addClass("show-reassignable-targets")}).on("drop",function(n){t.removeClass("show-reassignable-targets"),o(r)}).on("cancel",function(n){t.removeClass("show-reassignable-targets"),o(r)}).on("over",function(n,e){$(document.activeElement).blur()})})},500)}require("dragula/dist/dragula.min.css"),$(document).on("turbo:load",function(){console.log("游꼴 Sortable: Enabling on <body> after a Turbo load."),t($("body"))}),$(document).on("sprinkles:update",function(n){console.log("游꼴 Sortable: Enabling on the following element after a Sprinkles content update:"),console.log(n.target),t($(n.target))}),require("dragula/dist/dragula.min.css"),$(document).on("turbo:load",function(){console.log("游꼴 Reassignable: Enabling on <body> after a Turbo load."),r($("body"))}),$(document).on("sprinkles:update",function(n){console.log("游꼴 Reassignable: Enabling on the following element after a Sprinkles content update:"),console.log(n.target),r($(n.target))})});
//# sourceMappingURL=bullet-train.umd.js.map
